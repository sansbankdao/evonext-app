# Yappr! Social Platform - Dash Data Contract

This directory contains the Dash Platform data contract for the Yappr! social media dapp.

## Overview

The Yappr! data contract defines all the document types and schemas needed for a full-featured social media platform on Dash Platform. It includes support for:

- User profiles with verification
- Posts with media attachments
- Likes, reposts, and bookmarks
- Following/follower relationships
- Direct messages (encrypted)
- Lists for organizing users
- Blocking and muting
- Notifications

## Document Types

### 1. **profile**
User profile information including username, display name, bio, and avatar.

**Key Features:**
- Unique usernames (3-25 characters)
- Profile customization (avatar, banner, bio)
- Autogenerated avatar data (16-64 character string encoding avatar features)

### 2. **post**
The main content type - posts/tweets with up to 500 characters.

**Key Features:**
- Text content with 500 character limit
- Up to 4 media attachments (images, videos, gifs)
- Reply threads
- Quote posts
- Mentions and hashtags
- Language detection
- Sensitive content flagging

### 3. **like**
Records when a user likes a post.

**Key Features:**
- Unique constraint prevents duplicate likes
- Indexed for fast queries by user or post

### 4. **repost**
Records when a user reposts/retweets content.

**Key Features:**
- Similar to likes with unique constraints
- Enables repost timelines

### 5. **follow**
Manages follower/following relationships between users.

**Key Features:**
- Unique constraint on follower-following pairs
- Indexed for both directions of the relationship

### 6. **bookmark**
Allows users to save posts for later.

**Key Features:**
- Private to the user
- Chronologically ordered

### 7. **list**
User-created lists for organizing accounts.

**Key Features:**
- Public or private lists
- Named and described
- Managed through listMember documents

### 8. **listMember**
Tracks which users are in which lists.

### 9. **block**
Records when a user blocks another user.

**Key Features:**
- Prevents interaction between users
- Private to the blocker

### 10. **mute**
Temporarily hide content from specific users.

**Key Features:**
- Optional expiration time
- Less severe than blocking

### 11. **directMessage**
Encrypted private messages between users.

**Key Features:**
- End-to-end encrypted content
- Conversation threading
- Read receipts

### 12. **notification**
Tracks user notifications for various activities.

**Key Features:**
- Multiple notification types
- Read/unread status
- Chronologically ordered

## Indices

The contract includes carefully designed indices for optimal query performance:

- **Username lookups** - Fast unique username checks
- **Timeline queries** - Efficient chronological feeds
- **Relationship queries** - Quick follower/following lookups
- **Interaction queries** - Fast like/repost counts
- **Thread queries** - Efficient reply chain loading

## Security Considerations

1. **Identity-based** - All documents use Dash identities for ownership
2. **Pattern validation** - Strict regex patterns for usernames
3. **Size limits** - Reasonable limits on all text fields
4. **Unique constraints** - Prevent duplicate interactions
5. **Encrypted DMs** - Private messages use client-side encryption
6. **Proper ID format** - All identity and document IDs use 32-byte arrays (byteArray format)

## Usage Example

```javascript
// Create a profile
const profile = {
  username: "alice",
  displayName: "Alice Smith",
  bio: "Building on Dash Platform",
  avatar: "v1:0000a5b3c2d4e8f6" // Autogenerated avatar string (min 16, max 64 chars)
};

// Create a post
const post = {
  authorId: identity.getId().toBuffer(), // 32-byte buffer
  content: "Hello Yappr! This is my first post on the decentralized social network ðŸš€",
  hashtags: ["yappr", "dash", "decentralized"],
  language: "en"
};

// Like a post
const like = {
  userId: identity.getId().toBuffer(), // 32-byte buffer
  postId: Buffer.from(postDocumentId, 'hex') // Convert document ID to buffer
};
```

## Contract Deployment

To deploy this contract to Dash Platform:

1. Update the `ownerId` field with your identity ID
2. Use the Dash SDK to register the contract
3. Fund the contract with credits for storage

```javascript
const contract = await platform.contracts.create(dataContract, identity);
await platform.contracts.publish(contract, identity);
```

## Future Enhancements

Potential additions for future versions:
- Polls and surveys
- Spaces/audio rooms
- Community features
- Monetization (tips, subscriptions)
- Advanced moderation tools
- Analytics documents
